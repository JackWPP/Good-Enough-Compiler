# Good-Enough-Compiler

ä¸€ä¸ªæ•™å­¦ç”¨çš„ç¼–è¯‘å™¨å®ç°ï¼Œæ”¯æŒCè¯­è¨€å’ŒPascalè¯­è¨€ã€‚

## ğŸ¯ å¼€å‘çŠ¶æ€

### âœ… å·²å®Œæˆé˜¶æ®µ

**ç¬¬ä¸€é˜¶æ®µï¼šè¯æ³•åˆ†æ** (å·²å®Œæˆ)

- âœ… å®Œæ•´çš„è¯æ³•åˆ†æå™¨å®ç°
- âœ… æ”¯æŒCè¯­è¨€å’ŒPascalè¯­è¨€
- âœ… æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼ˆThompsonæ„é€ æ³•ã€å­é›†æ„é€ æ³•ï¼‰
- âœ… è‡ªåŠ¨æœºè½¬æ¢ï¼ˆNFA â†’ DFA â†’ æœ€å°åŒ–DFAï¼‰
- âœ… è¯¦ç»†çš„Tokenç»Ÿè®¡å’Œé”™è¯¯å¤„ç†
- âœ… Webç•Œé¢å’Œå‘½ä»¤è¡Œå·¥å…·
- âœ… HTML/JSONæŠ¥å‘Šç”Ÿæˆ

### ğŸš§ å¼€å‘è·¯çº¿å›¾

**ç¬¬äºŒé˜¶æ®µï¼šè¯­æ³•åˆ†æ** (åŸºæœ¬å®Œæˆ)

- âœ… LR(0)/SLR(1)/LR(1)åˆ†æå™¨
- âœ… æŠ½è±¡è¯­æ³•æ ‘(AST)æ„å»ºå’Œå¯è§†åŒ–
- âœ… First/Followé›†è®¡ç®—
- âœ… åˆ†æè¡¨æ„å»ºå’Œå†²çªæ£€æµ‹
- âœ… è¯­æ³•åˆ†ææ­¥éª¤è¿½è¸ª
- ğŸ”„ è¯­æ³•é”™è¯¯æ¢å¤

**ç¬¬ä¸‰é˜¶æ®µï¼šè¯­ä¹‰åˆ†æ** (éƒ¨åˆ†å¼€å§‹)

- ğŸ”„ ç¬¦å·è¡¨ç®¡ç†
- ğŸ”„ ç±»å‹æ£€æŸ¥
- ğŸ”„ ä½œç”¨åŸŸåˆ†æ
- ğŸ”„ è¯­ä¹‰é”™è¯¯æ£€æµ‹

**ç¬¬å››é˜¶æ®µï¼šä¸­é—´ä»£ç ç”Ÿæˆ** (åˆæ­¥å®ç°)

- âœ… å››å…ƒå¼(Quadruple)ä¸­é—´ä»£ç ç»“æ„
- âœ… ä¸´æ—¶å˜é‡å’Œæ ‡ç­¾ç”Ÿæˆå™¨
- ğŸ”„ ä¸‰åœ°å€ç ç”Ÿæˆ
- ğŸ”„ æ§åˆ¶æµå›¾æ„å»º
- ğŸ”„ ä»£ç ä¼˜åŒ–

**ç¬¬äº”é˜¶æ®µï¼šç›®æ ‡ä»£ç ç”Ÿæˆ** (è®¡åˆ’ä¸­)

- ğŸ”„ æ±‡ç¼–ä»£ç ç”Ÿæˆ
- ğŸ”„ å¯„å­˜å™¨åˆ†é…
- ğŸ”„ æŒ‡ä»¤é€‰æ‹©

**å¢å¼ºåŠŸèƒ½** (é•¿æœŸè®¡åˆ’)

- ğŸ”„ æ›´å¤šç¼–ç¨‹è¯­è¨€æ”¯æŒ
- ğŸ”„ IDEé›†æˆ
- ğŸ”„ è°ƒè¯•å™¨æ”¯æŒ
- ğŸ”„ æ€§èƒ½åˆ†æå·¥å…·

## ğŸš€ å½“å‰åŠŸèƒ½ç‰¹æ€§

### ğŸ“ è¯æ³•åˆ†æ (å·²å®Œæˆ)

- **å¤šè¯­è¨€æ”¯æŒ**: å®Œæ•´æ”¯æŒCè¯­è¨€å’ŒPascalè¯­è¨€è¯æ³•åˆ†æ
- **Tokenè¯†åˆ«**: è¯†åˆ«å…³é”®å­—ã€æ ‡è¯†ç¬¦ã€å­—é¢é‡ã€è¿ç®—ç¬¦ã€åˆ†éš”ç¬¦ç­‰
- **é”™è¯¯å¤„ç†**: è¯¦ç»†çš„è¯æ³•é”™è¯¯æ£€æµ‹å’ŒæŠ¥å‘Š
- **ç»Ÿè®¡ä¿¡æ¯**: å®Œæ•´çš„Tokenç»Ÿè®¡å’Œåˆ†ææŠ¥å‘Š

### ğŸ” è¯­æ³•åˆ†æ (åŸºæœ¬å®Œæˆ)

- **LRåˆ†æå™¨**: æ”¯æŒLR(0)ã€SLR(1)ã€LR(1)åˆ†ææ–¹æ³•
- **ASTæ„å»º**: å®Œæ•´çš„æŠ½è±¡è¯­æ³•æ ‘æ„å»ºå’Œå¯è§†åŒ–
- **First/Followé›†**: è‡ªåŠ¨è®¡ç®—æ–‡æ³•çš„Firstå’ŒFollowé›†
- **åˆ†æè¡¨æ„å»º**: è‡ªåŠ¨ç”ŸæˆActionè¡¨å’ŒGotoè¡¨
- **å†²çªæ£€æµ‹**: SLR(1)å’ŒLR(1)å†²çªè‡ªåŠ¨æ£€æµ‹
- **æ­¥éª¤è¿½è¸ª**: è¯¦ç»†çš„è¯­æ³•åˆ†ææ­¥éª¤è®°å½•
- **å¯è§†åŒ–**: è‡ªåŠ¨æœºçŠ¶æ€å›¾å’ŒASTæ ‘å½¢å›¾ç”Ÿæˆ

### ğŸ”§ æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ (å·²å®Œæˆ)

- **Thompsonæ„é€ æ³•**: æ­£åˆ™è¡¨è¾¾å¼åˆ°NFAçš„è½¬æ¢
- **å­é›†æ„é€ æ³•**: NFAåˆ°DFAçš„è½¬æ¢
- **DFAæœ€å°åŒ–**: ä¼˜åŒ–è‡ªåŠ¨æœºçŠ¶æ€æ•°é‡
- **å¯è§†åŒ–æ”¯æŒ**: è‡ªåŠ¨æœºå›¾å½¢åŒ–å±•ç¤º

### ğŸ–¥ï¸ ç”¨æˆ·ç•Œé¢ (å·²å®Œæˆ)

- **Webç•Œé¢**: åŸºäºGradioçš„ç°ä»£åŒ–Webç•Œé¢
- **å‘½ä»¤è¡Œå·¥å…·**: æ”¯æŒæ‰¹å¤„ç†å’Œè„šæœ¬åŒ–ä½¿ç”¨
- **å¤šç§è¾“å‡ºæ ¼å¼**: HTMLæŠ¥å‘Šã€JSONæ•°æ®ã€æ§åˆ¶å°è¾“å‡º

### ğŸ—ï¸ æ¶æ„è®¾è®¡ (å·²å®Œæˆ)

- **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—ç»“æ„ï¼Œä¾¿äºæ‰©å±•
- **APIæ¥å£**: ç»Ÿä¸€çš„ç¼–è¯‘å™¨API
- **é…ç½®ç³»ç»Ÿ**: çµæ´»çš„ç¼–è¯‘å™¨é…ç½®é€‰é¡¹
- **æ‰©å±•æ€§**: ä¸ºåç»­å¼€å‘é˜¶æ®µé¢„ç•™æ¥å£

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
Good-Enough-Compiler/
â”œâ”€â”€ compiler/                    # ç¼–è¯‘å™¨æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py             # ä¸»æ¨¡å—åˆå§‹åŒ– âœ…
â”‚   â”œâ”€â”€ api.py                  # ç»Ÿä¸€APIæ¥å£ âœ…
â”‚   â”œâ”€â”€ integrated_analyzer.py  # é›†æˆåˆ†æå™¨ âœ… (æ–°å¢)
â”‚   â”œâ”€â”€ integrated_app.py       # é›†æˆWebåº”ç”¨ âœ… (æ–°å¢)
â”‚   â”œâ”€â”€ ir_generator.py         # ä¸­é—´ä»£ç ç”Ÿæˆå™¨ âœ…
â”‚   â”œâ”€â”€ lexical/                # è¯æ³•åˆ†ææ¨¡å— âœ… (å·²å®Œæˆ)
â”‚   â”‚   â”œâ”€â”€ __init__.py         # âœ…
â”‚   â”‚   â”œâ”€â”€ token.py            # Tokenå®šä¹‰ âœ…
â”‚   â”‚   â”œâ”€â”€ analyzer.py         # è¯æ³•åˆ†æå™¨ âœ…
â”‚   â”‚   â”œâ”€â”€ automata.py         # è‡ªåŠ¨æœºå®ç° âœ…
â”‚   â”‚   â”œâ”€â”€ c_rules.txt         # Cè¯­è¨€è¯æ³•è§„åˆ™ âœ…
â”‚   â”‚   â””â”€â”€ pascal_rules.txt    # Pascalè¯­è¨€è¯æ³•è§„åˆ™ âœ…
â”‚   â”œâ”€â”€ syntax/                 # è¯­æ³•åˆ†ææ¨¡å— âœ… (åŸºæœ¬å®Œæˆ)
â”‚   â”‚   â”œâ”€â”€ __init__.py         # åŸºç¡€ç»“æ„ âœ…
â”‚   â”‚   â”œâ”€â”€ app.py              # è¯­æ³•åˆ†æWebåº”ç”¨ âœ…
â”‚   â”‚   â”œâ”€â”€ ast_builder.py      # ASTæ„å»ºå™¨ âœ…
â”‚   â”‚   â”œâ”€â”€ ast_nodes.py        # ASTèŠ‚ç‚¹å®šä¹‰ âœ…
â”‚   â”‚   â”œâ”€â”€ first_follow.py     # First/Followé›†è®¡ç®— âœ…
â”‚   â”‚   â”œâ”€â”€ lr0_dfa.py          # LR(0)è‡ªåŠ¨æœº âœ…
â”‚   â”‚   â”œâ”€â”€ lr1_dfa.py          # LR(1)è‡ªåŠ¨æœº âœ…
â”‚   â”‚   â”œâ”€â”€ parser_engine.py    # è¯­æ³•åˆ†æå¼•æ“ âœ…
â”‚   â”‚   â””â”€â”€ slr1_check.py       # SLR(1)å†²çªæ£€æµ‹ âœ…
â”‚   â”œâ”€â”€ semantic/               # è¯­ä¹‰åˆ†ææ¨¡å— ğŸ”„ (éƒ¨åˆ†å¼€å§‹)
â”‚   â”‚   â””â”€â”€ __init__.py         # åŸºç¡€ç»“æ„ âœ…
â”‚   â”œâ”€â”€ codegen/                # ä»£ç ç”Ÿæˆæ¨¡å— ğŸ”„ (ç¬¬äº”é˜¶æ®µ)
â”‚   â”‚   â””â”€â”€ __init__.py         # åŸºç¡€ç»“æ„ âœ…
â”‚   â””â”€â”€ utils/                  # å·¥å…·æ¨¡å— âœ…
â”‚       â”œâ”€â”€ __init__.py         # âœ…
â”‚       â”œâ”€â”€ visualization.py    # å¯è§†åŒ–å·¥å…· âœ…
â”‚       â”œâ”€â”€ file_utils.py       # æ–‡ä»¶å¤„ç† âœ…
â”‚       â””â”€â”€ formatters.py       # æ ¼å¼åŒ–å·¥å…· âœ…
â”œâ”€â”€ main_new.py                 # ä¸»ç¨‹åº âœ…
â”œâ”€â”€ integrated_app.py           # é›†æˆç¼–è¯‘å™¨Webåº”ç”¨ âœ… (æ–°å¢)
â”œâ”€â”€ sample_code.c               # Cè¯­è¨€æµ‹è¯•æ–‡ä»¶ âœ…
â”œâ”€â”€ sample_code.pas             # Pascalæµ‹è¯•æ–‡ä»¶ âœ…
â”œâ”€â”€ debug_analyze.py            # é›†æˆåˆ†æè°ƒè¯•å·¥å…· âœ… (æ–°å¢)
â”œâ”€â”€ debug_lexer.py              # è¯æ³•åˆ†æå™¨è°ƒè¯•å·¥å…· âœ…
â”œâ”€â”€ debug_parser.py             # è¯­æ³•åˆ†æå™¨è°ƒè¯•å·¥å…· âœ… (æ–°å¢)
â”œâ”€â”€ test_slr1_check.py          # SLR(1)å†²çªæ£€æµ‹æµ‹è¯• âœ… (æ–°å¢)
â”œâ”€â”€ main.py                     # åŸç‰ˆä¸»ç¨‹åº (ä¿ç•™)
â”œâ”€â”€ main_new.py                 # æ–°ç‰ˆä¸»ç¨‹åº âœ…
â”œâ”€â”€ lexical_analyzer.py         # åŸç‰ˆè¯æ³•åˆ†æå™¨ (ä¿ç•™)
â”œâ”€â”€ nfa_dfa_converter.py        # åŸç‰ˆè‡ªåŠ¨æœºè½¬æ¢ (ä¿ç•™)
â””â”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£ âœ…
```

### ğŸ“Š å¼€å‘è¿›åº¦

| æ¨¡å—         | çŠ¶æ€        | å®Œæˆåº¦ | è¯´æ˜                                        |
| ------------ | ----------- | ------ | ------------------------------------------- |
| è¯æ³•åˆ†æ     | âœ… å·²å®Œæˆ   | 100%   | æ”¯æŒC/Pascalï¼ŒåŒ…å«å®Œæ•´çš„Tokenè¯†åˆ«å’Œé”™è¯¯å¤„ç† |
| è¯­æ³•åˆ†æ     | âœ… åŸºæœ¬å®Œæˆ | 85%    | LRåˆ†æå™¨ã€ASTæ„å»ºã€å¯è§†åŒ–å·²å®Œæˆ             |
| è¯­ä¹‰åˆ†æ     | ğŸ”„ éƒ¨åˆ†å¼€å§‹ | 5%     | æ¨¡å—ç»“æ„å·²åˆ›å»ºï¼Œç­‰å¾…è¯­æ³•åˆ†æå®Œæˆ            |
| ä¸­é—´ä»£ç ç”Ÿæˆ | ğŸ”„ åˆæ­¥å®ç° | 15%    | å››å…ƒå¼ç»“æ„å’ŒåŸºç¡€ç”Ÿæˆå™¨å·²å®ç°                |
| ç›®æ ‡ä»£ç ç”Ÿæˆ | ğŸ”„ è®¡åˆ’ä¸­   | 0%     | ç¬¬äº”é˜¶æ®µå¼€å‘ç›®æ ‡                            |

## ğŸ› ï¸ å®‰è£…å’Œä½¿ç”¨

### ç¯å¢ƒè¦æ±‚

- Python 3.7+
- ä¾èµ–åŒ…ï¼šgradioï¼ˆå¯é€‰ï¼Œç”¨äºWebç•Œé¢ï¼‰

### å¿«é€Ÿå¼€å§‹

1. **å…‹éš†é¡¹ç›®**

   ```bash
   git clone <repository-url>
   cd Good-Enough-Compiler
   ```
2. **å®‰è£…ä¾èµ–**ï¼ˆå¯é€‰ï¼‰

   ```bash
   pip install gradio
   ```
3. **ä½“éªŒå®Œæ•´ç¼–è¯‘åŠŸèƒ½**

   ```bash
   # å¯åŠ¨é›†æˆWebç•Œé¢ï¼ˆæ¨èï¼‰
   python integrated_app.py

   # æˆ–ä½¿ç”¨åŸç‰ˆè¯æ³•åˆ†æ
   python main_new.py --gui

   # è°ƒè¯•è¯­æ³•åˆ†æ
   python debug_analyze.py

   # æµ‹è¯•SLR(1)å†²çªæ£€æµ‹
   python test_slr1_check.py
   ```

### ğŸ‰ é›†æˆç¼–è¯‘å™¨æˆæœå±•ç¤º

è¿è¡Œé›†æˆåˆ†æåï¼Œæ‚¨å°†çœ‹åˆ°ï¼š

**è¯æ³•åˆ†æç»“æœï¼š**

```
=== è¯æ³•åˆ†æå®Œæˆ ===
âœ… æˆåŠŸè¯†åˆ« 95 ä¸ªToken
ğŸ“Š ç»Ÿè®¡ä¿¡æ¯:
   - æ€»è¡Œæ•°: 24
   - æ€»å­—ç¬¦æ•°: 332
   - å¤„ç†æ—¶é—´: 0.023ç§’
   - é”™è¯¯æ•°: 0
```

**è¯­æ³•åˆ†æç»“æœï¼š**

```
=== è¯­æ³•åˆ†æå®Œæˆ ===
âœ… æ–‡æ³•ç±»å‹: SLR(1)
ğŸ“Š åˆ†æä¿¡æ¯:
   - çŠ¶æ€æ•°: 12
   - äº§ç”Ÿå¼æ•°: 8
   - åˆ†ææ­¥éª¤: 15
   - ASTèŠ‚ç‚¹æ•°: 7
   - åˆ†æç»“æœ: accept
```

**å¯è§†åŒ–è¾“å‡ºï¼š**

- ğŸŒ³ ASTæ ‘å½¢ç»“æ„å›¾
- ğŸ“Š LRè‡ªåŠ¨æœºçŠ¶æ€è½¬æ¢å›¾
- ğŸ“‹ Action/Gotoåˆ†æè¡¨
- ğŸ“ è¯¦ç»†åˆ†ææ­¥éª¤

### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# æ˜¾ç¤ºå¸®åŠ©
python main_new.py --help

# å¯åŠ¨Webç•Œé¢
python main_new.py --gui

# åˆ†ææ–‡ä»¶
python main_new.py --analyze <æ–‡ä»¶è·¯å¾„> --language <c|pascal>

# è¯¦ç»†è¾“å‡º
python main_new.py --analyze <æ–‡ä»¶è·¯å¾„> --verbose

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶
python main_new.py --analyze <æ–‡ä»¶è·¯å¾„> --output <è¾“å‡ºè·¯å¾„>

# æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢
python main_new.py --test-regex "a|b*"

# åˆ›å»ºç¤ºä¾‹æ–‡ä»¶
python main_new.py --create-samples

# æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
python main_new.py --version
```

## ğŸ“š API æ–‡æ¡£

### æ ¸å¿ƒç±»

#### IntegratedAnalyzer

é›†æˆåˆ†æå™¨ç±»ï¼Œæä¾›å®Œæ•´çš„è¯æ³•å’Œè¯­æ³•åˆ†æåŠŸèƒ½ã€‚

```python
from compiler.integrated_analyzer import create_integrated_analyzer

# åˆ›å»ºé›†æˆåˆ†æå™¨
analyzer = create_integrated_analyzer('c')  # æˆ– 'pascal'

# è®¾ç½®è‡ªå®šä¹‰æ–‡æ³•
grammar = "E â†’ E + T | T\nT â†’ T * F | F\nF â†’ ( E ) | id"
analyzer.set_grammar(grammar)

# åˆ†ææºä»£ç å’Œå¥å­
result = analyzer.analyze_code(source_code, sentence)

# è®¿é—®åˆ†æç»“æœ
print(f"Tokenæ•°é‡: {len(result.tokens)}")
print(f"æ˜¯å¦ä¸ºSLR(1): {result.is_slr1}")
print(f"ASTæ ¹èŠ‚ç‚¹: {result.ast_root}")
```

#### Compiler (åŸç‰ˆ)

ä¸»ç¼–è¯‘å™¨ç±»ï¼Œæä¾›å®Œæ•´çš„ç¼–è¯‘åŠŸèƒ½ã€‚

```python
from compiler import Compiler, CompilerConfig

# åˆ›å»ºç¼–è¯‘å™¨
compiler = Compiler()

# ç¼–è¯‘æ–‡ä»¶
result = compiler.compile_file('sample.c', language='c')

# ç¼–è¯‘æºä»£ç 
code = '#include <stdio.h>\nint main() { return 0; }'
result = compiler.compile_source(code, language='c')
```

#### CompilerConfig

ç¼–è¯‘å™¨é…ç½®ç±»ã€‚

```python
config = CompilerConfig(
    language='c',           # ç¼–ç¨‹è¯­è¨€
    verbose=True,          # è¯¦ç»†è¾“å‡º
    output_tokens=True,    # è¾“å‡ºToken
    output_html=True,      # ç”ŸæˆHTMLæŠ¥å‘Š
    output_json=False      # ç”ŸæˆJSONæŠ¥å‘Š
)
```

#### CompilationResult

ç¼–è¯‘ç»“æœç±»ï¼ŒåŒ…å«æ‰€æœ‰åˆ†æä¿¡æ¯ã€‚

```python
# è®¿é—®ç»“æœ
print(f"Tokenæ•°é‡: {len(result.tokens)}")
print(f"é”™è¯¯æ•°é‡: {len(result.errors)}")
print(f"å¤„ç†æ—¶é—´: {result.processing_time}ç§’")
print(f"ç»Ÿè®¡ä¿¡æ¯: {result.statistics}")
```

### è¯­æ³•åˆ†æAPI

```python
from compiler.syntax.parser_engine import parse_sentence
from compiler.syntax.first_follow import process_first_follow
from compiler.syntax.slr1_check import check_slr1

# è¯­æ³•åˆ†æ
grammar = "E â†’ E + T | T\nT â†’ T * F | F\nF â†’ ( E ) | id"
sentence = "id + id * id"
steps, ast_root = parse_sentence(grammar, sentence, method="SLR(1)")

# First/Followé›†è®¡ç®—
grammar_obj = process_first_follow(grammar)
print(f"Firsté›†: {grammar_obj.first}")
print(f"Followé›†: {grammar_obj.follow}")

# SLR(1)å†²çªæ£€æµ‹
is_slr1, conflicts = check_slr1(grammar_obj)
print(f"æ˜¯å¦ä¸ºSLR(1): {is_slr1}")
```

### ä¾¿æ·å‡½æ•°

```python
from compiler import compile_file, compile_source, analyze_tokens

# ç¼–è¯‘æ–‡ä»¶
result = compile_file('sample.c', language='c')

# ç¼–è¯‘æºä»£ç 
result = compile_source(code, language='c')

# ä»…è¿›è¡Œè¯æ³•åˆ†æ
tokens = analyze_tokens(code, language='c')
```

### è¯æ³•åˆ†æå™¨

```python
from compiler.lexical import create_c_analyzer, create_pascal_analyzer

# åˆ›å»ºCè¯­è¨€åˆ†æå™¨
analyzer = create_c_analyzer()

# åˆ†æä»£ç 
tokens = analyzer.analyze(code)
errors = analyzer.get_errors()
statistics = analyzer.get_statistics()
```

### ASTæ“ä½œ

```python
from compiler.syntax.ast_nodes import ASTNode, ASTVisualizer
from compiler.syntax.ast_builder import ASTBuilder

# åˆ›å»ºASTèŠ‚ç‚¹
node = ASTNode('expression', 'id')
node.add_child(ASTNode('operator', '+'))
node.add_child(ASTNode('expression', 'id'))

# ASTå¯è§†åŒ–
visualizer = ASTVisualizer()
svg_content = visualizer.to_svg(node)
html_content = visualizer.to_html(node)

# ASTæ„å»ºå™¨
builder = ASTBuilder()
ast_root = builder.build_from_parse_tree(parse_tree)
```

### è‡ªåŠ¨æœºè½¬æ¢

```python
from compiler.lexical import RegexToNFA, NFAToDFA, DFAMinimizer

# æ­£åˆ™è¡¨è¾¾å¼è½¬NFA
regex_converter = RegexToNFA()
nfa = regex_converter.convert('a|b*')

# NFAè½¬DFA
nfa_to_dfa = NFAToDFA()
dfa = nfa_to_dfa.convert(nfa)

# DFAæœ€å°åŒ–
minimizer = DFAMinimizer()
minimized_dfa = minimizer.minimize(dfa)
```

### å¯è§†åŒ–å·¥å…·

```python
from compiler.utils import visualize_nfa, visualize_dfa, create_token_table_html

# å¯è§†åŒ–è‡ªåŠ¨æœº
visualize_nfa(nfa, 'nfa.png')
visualize_dfa(dfa, 'dfa.png')

# ç”ŸæˆTokenè¡¨æ ¼
html_table = create_token_table_html(tokens)
```

## ğŸ¯ æ”¯æŒçš„è¯­è¨€ç‰¹æ€§

### Cè¯­è¨€

- **å…³é”®å­—**: `int`, `float`, `char`, `if`, `else`, `while`, `for`, `return`, `include`, ç­‰
- **æ•°æ®ç±»å‹**: æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ã€å­—ç¬¦ä¸²
- **è¿ç®—ç¬¦**: ç®—æœ¯ã€å…³ç³»ã€é€»è¾‘ã€ä½è¿ç®—ã€èµ‹å€¼è¿ç®—ç¬¦
- **åˆ†éš”ç¬¦**: æ‹¬å·ã€åˆ†å·ã€é€—å·ç­‰
- **æ³¨é‡Š**: å•è¡Œæ³¨é‡Š(`//`)å’Œå¤šè¡Œæ³¨é‡Š(`/* */`)
- **é¢„å¤„ç†**: `#include`, `#define`ç­‰

### Pascalè¯­è¨€

- **å…³é”®å­—**: `program`, `begin`, `end`, `var`, `if`, `then`, `else`, `while`, `for`, ç­‰
- **æ•°æ®ç±»å‹**: `integer`, `real`, `char`, `string`, `boolean`
- **è¿ç®—ç¬¦**: ç®—æœ¯ã€å…³ç³»ã€é€»è¾‘è¿ç®—ç¬¦
- **åˆ†éš”ç¬¦**: æ‹¬å·ã€åˆ†å·ã€é€—å·ç­‰
- **æ³¨é‡Š**: å¤§æ‹¬å·æ³¨é‡Š(`{ }`)å’Œåœ†æ‹¬å·æ³¨é‡Š(`(* *)`)

## ğŸ“Š è¾“å‡ºæ ¼å¼

### Tokenè¡¨æ ¼

| åºå· | Tokenç±»å‹  | Tokenå€¼ | è¡Œå· | åˆ—å· |
| ---- | ---------- | ------- | ---- | ---- |
| 1    | KEYWORD    | int     | 1    | 1    |
| 2    | IDENTIFIER | main    | 1    | 5    |
| 3    | DELIMITER  | (       | 1    | 9    |

### ç»Ÿè®¡ä¿¡æ¯

```
=== è¯æ³•åˆ†æç»Ÿè®¡ ===
æ€»Tokenæ•°: 156
æ€»è¡Œæ•°: 23
æ€»å­—ç¬¦æ•°: 445
é”™è¯¯æ•°: 0
å¤„ç†æ—¶é—´: 0.023ç§’

Tokenç±»å‹åˆ†å¸ƒ:
  IDENTIFIER    : 45 (28.8%)
  KEYWORD       : 23 (14.7%)
  DELIMITER     : 21 (13.5%)
  OPERATOR      : 18 (11.5%)
  LITERAL_INT   : 12 (7.7%)
```

### HTMLæŠ¥å‘Š

ç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„HTMLæŠ¥å‘Šï¼š

- æºä»£ç è¯­æ³•é«˜äº®
- Tokenè¡¨æ ¼
- ç»Ÿè®¡å›¾è¡¨
- é”™è¯¯ä¿¡æ¯
- è‡ªåŠ¨æœºå¯è§†åŒ–

## ğŸ”§ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°è¯­è¨€æ”¯æŒ

1. **åˆ›å»ºè¯æ³•è§„åˆ™æ–‡ä»¶**

   ```
   # åœ¨ compiler/lexical/ ç›®å½•ä¸‹åˆ›å»º <language>_rules.txt
   # æ ¼å¼: æ­£åˆ™è¡¨è¾¾å¼ | Tokenç±»å‹ | ä¼˜å…ˆçº§
   ```
2. **æ‰©å±•TokenTypeæšä¸¾**

   ```python
   # åœ¨ compiler/lexical/token.py ä¸­æ·»åŠ æ–°çš„Tokenç±»å‹
   ```
3. **åˆ›å»ºåˆ†æå™¨å‡½æ•°**

   ```python
   def create_<language>_analyzer():
       analyzer = LexicalAnalyzer()
       analyzer.load_rules_from_file('<language>_rules.txt')
       return analyzer
   ```

### æ·»åŠ æ–°çš„åˆ†æé˜¶æ®µ

1. **è¯­æ³•åˆ†æ**: åœ¨ `compiler/syntax/`ç›®å½•ä¸‹å®ç°
2. **è¯­ä¹‰åˆ†æ**: åœ¨ `compiler/semantic/`ç›®å½•ä¸‹å®ç°
3. **ä»£ç ç”Ÿæˆ**: åœ¨ `compiler/codegen/`ç›®å½•ä¸‹å®ç°

### è‡ªå®šä¹‰å¯è§†åŒ–

```python
from compiler.utils import create_custom_chart

# åˆ›å»ºè‡ªå®šä¹‰ç»Ÿè®¡å›¾è¡¨
chart = create_custom_chart(data, chart_type='bar')
```

## ğŸ§ª æµ‹è¯•ç¤ºä¾‹

### Cè¯­è¨€ç¤ºä¾‹

```c
#include <stdio.h>

int factorial(int n) {
    if (n <= 1) {
        return 1;
    }
    return n * factorial(n - 1);
}

int main() {
    int num = 5;
    printf("%d! = %d\n", num, factorial(num));
    return 0;
}
```

### Pascalè¯­è¨€ç¤ºä¾‹

```pascal
program FactorialExample;

function Factorial(n: integer): integer;
begin
    if n <= 1 then
        Factorial := 1
    else
        Factorial := n * Factorial(n - 1);
end;

var
    num: integer;
begin
    num := 5;
    writeln(num, '! = ', Factorial(num));
end.
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ–°çš„Tokenç±»å‹ï¼Ÿ

A: åœ¨ `compiler/lexical/token.py`ä¸­çš„ `TokenType`æšä¸¾ä¸­æ·»åŠ æ–°ç±»å‹ï¼Œç„¶ååœ¨è¯æ³•è§„åˆ™æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚

### Q: å¦‚ä½•è‡ªå®šä¹‰è¯æ³•è§„åˆ™ï¼Ÿ

A: åˆ›å»ºæ–°çš„è§„åˆ™æ–‡ä»¶ï¼Œæ ¼å¼ä¸ºï¼š`æ­£åˆ™è¡¨è¾¾å¼ | Tokenç±»å‹ | ä¼˜å…ˆçº§`ï¼Œç„¶åä½¿ç”¨ `load_rules_from_file()`åŠ è½½ã€‚

### Q: å¦‚ä½•å¤„ç†è¯æ³•åˆ†æé”™è¯¯ï¼Ÿ

A: åˆ†æå™¨ä¼šè‡ªåŠ¨æ”¶é›†é”™è¯¯ä¿¡æ¯ï¼Œå¯é€šè¿‡ `get_errors()`æ–¹æ³•è·å–è¯¦ç»†çš„é”™è¯¯åˆ—è¡¨ã€‚

### Q: å¦‚ä½•æ‰©å±•åˆ°å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼Ÿ

A: å‚è€ƒCè¯­è¨€å’ŒPascalè¯­è¨€çš„å®ç°ï¼Œåˆ›å»ºå¯¹åº”çš„è¯æ³•è§„åˆ™æ–‡ä»¶å’Œåˆ†æå™¨å‡½æ•°ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ç”¨äºæ•™å­¦ç›®çš„ï¼Œè¯·éµå¾ªç›¸å…³å¼€æºåè®®ã€‚

## ğŸš€ ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

### ç¬¬äºŒé˜¶æ®µï¼šè¯­æ³•åˆ†æ (åŸºæœ¬å®Œæˆ)

æˆ‘ä»¬å·²åœ¨ç¬¬äºŒé˜¶æ®µå®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **LRåˆ†æå™¨ç³»åˆ—** âœ…

   - LR(0)è‡ªåŠ¨æœºæ„å»ºå’ŒçŠ¶æ€è½¬æ¢
   - SLR(1)åˆ†æè¡¨ç”Ÿæˆå’Œå†²çªæ£€æµ‹
   - LR(1)åˆ†æå™¨å®ç°
   - æ”¯æŒè‡ªå®šä¹‰æ–‡æ³•è¾“å…¥å’Œåˆ†æ
2. **æŠ½è±¡è¯­æ³•æ ‘(AST)** âœ…

   - å®Œæ•´çš„ASTèŠ‚ç‚¹ä½“ç³»
   - ASTå¯è§†åŒ–ï¼ˆSVGå’ŒHTMLæ ¼å¼ï¼‰
   - ASTéå†å’Œæ“ä½œæ¥å£
   - ä»åˆ†ææ­¥éª¤è‡ªåŠ¨æ„å»ºAST
3. **åˆ†æå·¥å…·å’Œå¯è§†åŒ–** âœ…

   - First/Followé›†è‡ªåŠ¨è®¡ç®—
   - Action/Gotoè¡¨ç”Ÿæˆå’Œæ˜¾ç¤º
   - åˆ†ææ­¥éª¤è¯¦ç»†è¿½è¸ª
   - è‡ªåŠ¨æœºçŠ¶æ€å›¾å¯è§†åŒ–
4. **é›†æˆå¼€å‘ç¯å¢ƒ** âœ…

   - ç»Ÿä¸€çš„Webç•Œé¢
   - è¯æ³•å’Œè¯­æ³•åˆ†æé›†æˆ
   - è°ƒè¯•å·¥å…·å’Œæµ‹è¯•è„šæœ¬
   - é”™è¯¯æ£€æµ‹å’ŒæŠ¥å‘Š

### å¦‚ä½•å‚ä¸å¼€å‘

å¦‚æœæ‚¨æƒ³å‚ä¸ä¸‹ä¸€é˜¶æ®µçš„å¼€å‘ï¼Œå¯ä»¥ï¼š

1. **Forké¡¹ç›®å¹¶åˆ›å»ºåˆ†æ”¯**

   ```bash
   git checkout -b feature/syntax-analysis
   ```
2. **é€‰æ‹©å¼€å‘ä»»åŠ¡**

   - è¯­æ³•è§„åˆ™å®šä¹‰
   - ASTèŠ‚ç‚¹è®¾è®¡
   - åˆ†æå™¨å®ç°
   - æµ‹è¯•ç”¨ä¾‹ç¼–å†™
3. **éµå¾ªä»£ç è§„èŒƒ**

   - ä¿æŒä¸ç°æœ‰ä»£ç é£æ ¼ä¸€è‡´
   - æ·»åŠ å®Œæ•´çš„æ–‡æ¡£å’Œæ³¨é‡Š
   - ç¼–å†™å•å…ƒæµ‹è¯•

## ğŸ¤ è´¡çŒ®æŒ‡å—

### è´¡çŒ®è€…

æ„Ÿè°¢ä»¥ä¸‹è´¡çŒ®è€…å¯¹é¡¹ç›®çš„æ”¯æŒï¼š

- **JackWPP** - é¡¹ç›®åˆ›å§‹äººï¼Œè¯æ³•åˆ†ææ¨¡å—æ ¸å¿ƒå¼€å‘
- **allencat0712** - è¯­ä¹‰åˆ†ææ¨¡å—è´¡çŒ®
- **Bcccccc03** - ä¸­é—´ä»£ç ç”Ÿæˆå™¨å®ç°

### å½“å‰è´¡çŒ®é‡ç‚¹

- ğŸ” **è¯­ä¹‰åˆ†æ**: ç¬¦å·è¡¨ç®¡ç†å’Œç±»å‹æ£€æŸ¥ç³»ç»Ÿ
- ğŸ—ï¸ **ä¸­é—´ä»£ç ä¼˜åŒ–**: ä¸‰åœ°å€ç ç”Ÿæˆå’Œä¼˜åŒ–
- ğŸ¯ **ç›®æ ‡ä»£ç ç”Ÿæˆ**: æ±‡ç¼–ä»£ç ç”Ÿæˆå™¨
- ğŸ› **Bugä¿®å¤**: è¯­æ³•åˆ†æå™¨çš„è¾¹ç•Œæƒ…å†µå¤„ç†
- ğŸ“ **æ–‡æ¡£å®Œå–„**: è¯­æ³•åˆ†æAPIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- ğŸ§ª **æµ‹è¯•å¢å¼º**: æ›´å¤šè¯­æ³•åˆ†ææµ‹è¯•ç”¨ä¾‹
- ğŸ¨ **UIæ”¹è¿›**: é›†æˆç•Œé¢çš„ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- ğŸ”§ **å·¥å…·å¢å¼º**: æ›´å¤šè°ƒè¯•å’Œå¼€å‘è¾…åŠ©åŠŸèƒ½

### æäº¤è§„èŒƒ

```bash
# åŠŸèƒ½å¼€å‘
git commit -m "feat: æ·»åŠ æ–°çš„Tokenç±»å‹æ”¯æŒ"

# Bugä¿®å¤
git commit -m "fix: ä¿®å¤å­—ç¬¦ä¸²å­—é¢é‡è§£æé”™è¯¯"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°APIä½¿ç”¨ç¤ºä¾‹"

# æµ‹è¯•ç›¸å…³
git commit -m "test: æ·»åŠ Pascalè¯­è¨€æµ‹è¯•ç”¨ä¾‹"
```

## ğŸ“ˆ æœ€è¿‘æ›´æ–°

### v0.3.0 (æœ€æ–°)

- âœ… å®Œæ•´çš„è¯­æ³•åˆ†æåŠŸèƒ½å®ç°
- âœ… LR(0)/SLR(1)/LR(1)åˆ†æå™¨
- âœ… æŠ½è±¡è¯­æ³•æ ‘(AST)æ„å»ºå’Œå¯è§†åŒ–
- âœ… First/Followé›†è‡ªåŠ¨è®¡ç®—
- âœ… åˆ†æè¡¨æ„å»ºå’Œå†²çªæ£€æµ‹
- âœ… é›†æˆåˆ†æå™¨å’ŒWebç•Œé¢
- âœ… è¯­æ³•åˆ†ææ­¥éª¤è¿½è¸ªå’Œè°ƒè¯•å·¥å…·
- ğŸ”§ ä¿®å¤SLR(1)å†²çªæ£€æµ‹é—®é¢˜
- ğŸ”§ ä¼˜åŒ–ASTç”Ÿæˆå’Œæ˜¾ç¤º

### v0.2.0

- âœ… æ–°å¢ä¸­é—´ä»£ç ç”Ÿæˆå™¨æ¨¡å— (ir_generator.py)
- âœ… å®ç°å››å…ƒå¼(Quadruple)ä¸­é—´ä»£ç ç»“æ„
- âœ… æ·»åŠ ä¸´æ—¶å˜é‡å’Œæ ‡ç­¾ç”Ÿæˆå™¨
- ğŸ”„ å¼€å§‹è¯­ä¹‰åˆ†ææ¨¡å—å¼€å‘
- ğŸ”„ è¯­æ³•åˆ†ææ¨¡å—æ¡†æ¶æ­å»º

### v0.1.0

- âœ… å®Œæ•´çš„è¯æ³•åˆ†æåŠŸèƒ½
- âœ… æ”¯æŒCè¯­è¨€å’ŒPascalè¯­è¨€
- âœ… Webç•Œé¢å’Œå‘½ä»¤è¡Œå·¥å…·
- âœ… æ­£åˆ™è¡¨è¾¾å¼åˆ°è‡ªåŠ¨æœºè½¬æ¢

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- ğŸ“‹ **æäº¤Issue**: æŠ¥å‘ŠBugæˆ–æå‡ºåŠŸèƒ½å»ºè®®
- ğŸ”€ **Pull Request**: è´¡çŒ®ä»£ç æˆ–æ–‡æ¡£æ”¹è¿›
- ğŸ’¬ **è®¨è®ºåŒº**: å‚ä¸æŠ€æœ¯è®¨è®ºå’Œç»éªŒåˆ†äº«

---

**Good-Enough-Compiler** - è®©ç¼–è¯‘åŸç†å­¦ä¹ å˜å¾—æ›´ç®€å•ï¼

ğŸ¯ **ç¬¬ä¸€é˜¶æ®µå·²å®Œæˆ** | ğŸš§ **ç¬¬äºŒé˜¶æ®µå¼€å‘ä¸­** | ğŸ“š **æŒç»­å­¦ä¹ ï¼ŒæŒç»­æ”¹è¿›**
